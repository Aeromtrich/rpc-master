<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.3.0 Chrome/140.0.7339.249 Electron/38.7.2 Safari/537.36" version="29.3.0">
  <diagram name="第 1 页" id="z87kozAuE5pX91Fea74W">
    <mxGraphModel dx="4144" dy="1356" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="1920" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-1" parent="1" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="760" width="970" x="-1040" y="100" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-3" edge="1" parent="oBcN0H2LNpYQoeTPZNVO-1" source="oBcN0H2LNpYQoeTPZNVO-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="oBcN0H2LNpYQoeTPZNVO-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-7" parent="oBcN0H2LNpYQoeTPZNVO-1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="VerxTcpServer-TcpServerHander" vertex="1">
          <mxGeometry height="30" width="200" x="13.23987012987013" y="116.11111111111109" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-25" edge="1" parent="oBcN0H2LNpYQoeTPZNVO-1" source="oBcN0H2LNpYQoeTPZNVO-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="oBcN0H2LNpYQoeTPZNVO-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-8" parent="oBcN0H2LNpYQoeTPZNVO-1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="hander方法" vertex="1">
          <mxGeometry height="30" width="80" x="348.59620388385616" y="116.11111111111109" as="geometry" />
        </mxCell>
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-9" parent="oBcN0H2LNpYQoeTPZNVO-1" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;" value="1 解码&lt;div&gt;从本地注册器中拿到服务实现类&lt;br&gt;&lt;div&gt;2 反射调用 method.invoke方法&lt;/div&gt;&lt;div&gt;3构造RpcRsponse&lt;/div&gt;&lt;div&gt;4编码发出&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="168.89371428571428" width="136.40625" x="575.9375" y="46.46561038961039" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-2" edge="1" parent="oBcN0H2LNpYQoeTPZNVO-1" source="oBcN0H2LNpYQoeTPZNVO-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="oBcN0H2LNpYQoeTPZNVO-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bRpIeNP4qLkMaSWR5B6_-30" parent="oBcN0H2LNpYQoeTPZNVO-1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="HttpServerHander hander方法" vertex="1">
          <mxGeometry height="30" width="180" x="25.836572674882856" y="316.66666666666663" as="geometry" />
        </mxCell>
        <mxCell id="M8wU_xRPG1s27JFURRzf-13" parent="oBcN0H2LNpYQoeTPZNVO-1" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;" value="反序列化得到RpcRequest&lt;div&gt;反射调用&lt;/div&gt;&lt;div&gt;执行真正方法&lt;/div&gt;&lt;div&gt;序列化RpcResponse返回出去&lt;/div&gt;" vertex="1">
          <mxGeometry height="168.88888888888889" width="140.86681635791447" x="397.23367759532937" y="246.12775067750673" as="geometry" />
        </mxCell>
        <mxCell id="M8wU_xRPG1s27JFURRzf-14" edge="1" parent="oBcN0H2LNpYQoeTPZNVO-1" source="bRpIeNP4qLkMaSWR5B6_-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="M8wU_xRPG1s27JFURRzf-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Rk-BxHf28-0AiVOfme5U-5" parent="oBcN0H2LNpYQoeTPZNVO-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="providerBootstarp&lt;div&gt;.init(serviceList&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;)&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="120" x="13.234592899883852" y="536.226194244055" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-24" parent="oBcN0H2LNpYQoeTPZNVO-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="提供者&amp;nbsp;&lt;div&gt;8080 HTTP服务端口&amp;nbsp;&lt;/div&gt;&lt;div&gt;9090 rpc端口&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="140" x="83.1445367965368" y="24.277777777777782" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-67" parent="oBcN0H2LNpYQoeTPZNVO-1" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="203.90243902439025" width="304.8571428571429" x="491.71609523809525" y="481.95121951219517" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-66" parent="JBQeUsI5LZvYM7Zje36z-67" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="&lt;div&gt;&lt;br class=&quot;Apple-interchange-newline&quot;&gt;&lt;br&gt;&lt;/div&gt;先本地注册 concurrenthashMap LocalRegistry&lt;div&gt;userService:userServiceImp&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;注册服务到注册中心&lt;/div&gt;&lt;div&gt;UserService192.168.1.1:8080&lt;/div&gt;&lt;div&gt;UserService192.168.1.2:8080&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;添加到本地缓存 localRegisterNodeKeySet&lt;/div&gt;&lt;div&gt;UserService:8080&lt;/div&gt;&lt;div&gt;&lt;br style=&quot;text-align: left; text-wrap-mode: nowrap;&quot;&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="190" width="270" x="12.413868131868131" y="13.902439024390244" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-24" parent="oBcN0H2LNpYQoeTPZNVO-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="&lt;span style=&quot;text-align: left; text-wrap-mode: nowrap;&quot;&gt;1.rpcApp.init 加载application配置&amp;nbsp;&lt;/span&gt;&lt;div style=&quot;text-align: left; text-wrap-mode: nowrap;&quot;&gt;2.init(newRpcConfig)初始化配置中心 注册服务&lt;div&gt;3.拿到配置启动服务器&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="270" x="173.07571428571433" y="537.5609756097562" as="geometry" />
        </mxCell>
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-2" parent="1" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="960" width="1020" x="20" y="50" as="geometry" />
        </mxCell>
        <mxCell id="Rk-BxHf28-0AiVOfme5U-8" parent="oBcN0H2LNpYQoeTPZNVO-2" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="comsumerbootsrap.init" vertex="1">
          <mxGeometry height="30" width="140" x="174.85384265586865" y="832.2661948717946" as="geometry" />
        </mxCell>
        <mxCell id="Rk-BxHf28-0AiVOfme5U-11" parent="oBcN0H2LNpYQoeTPZNVO-2" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;" value="rpc.init()配置文件加载 configUtils Hutool的工具加载&lt;div&gt;配置已全部加载到全局变量 rpcConfig&lt;/div&gt;" vertex="1">
          <mxGeometry height="133.3333333333333" width="77.27272727272724" x="427.4254623732429" y="780.0026666666666" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-19" parent="oBcN0H2LNpYQoeTPZNVO-2" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="652.3076923076923" width="503.0177319587629" x="29.1420559646539" y="47.70061538461538" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-44" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="bRpIeNP4qLkMaSWR5B6_-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="JBQeUsI5LZvYM7Zje36z-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bRpIeNP4qLkMaSWR5B6_-31" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="RegistryFactory.get出registry实例&lt;div&gt;服务发现 返回一个ServiceMetaInfo列表&amp;nbsp;&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="240" x="11.00674001636833" y="136.85495708305072" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-50" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="bRpIeNP4qLkMaSWR5B6_-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="bRpIeNP4qLkMaSWR5B6_-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bRpIeNP4qLkMaSWR5B6_-42" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;try&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;RetryStrategyFactory&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;.get出RetryStrategy&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;retryStrategy.doRetry()&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;填入doRequest&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="90" width="140" x="63.09012153483664" y="340.97828004771156" as="geometry" />
        </mxCell>
        <mxCell id="bRpIeNP4qLkMaSWR5B6_-44" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="catch&lt;div&gt;tolerantStrategyFactory&lt;/div&gt;&lt;div&gt;.get出tolerantStrategy.doTolerant&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="200" x="31.544684323840105" y="492.30408681619383" as="geometry" />
        </mxCell>
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-11" parent="JBQeUsI5LZvYM7Zje36z-19" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;" value="1.把RPC请求&lt;div&gt;构造ProtocolMessage&lt;div&gt;2编码发出&lt;/div&gt;&lt;div&gt;3.等响应&lt;/div&gt;&lt;div&gt;4.返回数据即可&lt;/div&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="154.5107692307692" width="115.25999999999999" x="306.6584683357879" y="136.85292307692308" as="geometry" />
        </mxCell>
        <mxCell id="oBcN0H2LNpYQoeTPZNVO-10" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="VerxTcpClient.doRequest&amp;nbsp;&lt;div&gt;发送Rpc请求拿到响应&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="160" x="270.3467630562005" y="364.9830016137708" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-49" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="JBQeUsI5LZvYM7Zje36z-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="bRpIeNP4qLkMaSWR5B6_-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-43" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="LoadBalancerFactory&lt;div&gt;.get出一个loadBalancer&lt;/div&gt;&lt;div&gt;.select出一个ServiceMetaInfo&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="180" x="42.06147665568428" y="221.54422807961276" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-52" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="oBcN0H2LNpYQoeTPZNVO-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.358;entryY=1.02;entryDx=0;entryDy=0;entryPerimeter=0;" target="oBcN0H2LNpYQoeTPZNVO-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-53" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="构造RPC请求" vertex="1">
          <mxGeometry height="30" width="100" x="79.00428276877761" y="9.899076923076922" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-56" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="bRpIeNP4qLkMaSWR5B6_-31" style="endArrow=classic;html=1;rounded=0;exitX=0.738;exitY=-0.005;exitDx=0;exitDy=0;exitPerimeter=0;" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="184.57222974963182" y="134.69938461538462" as="sourcePoint" />
            <mxPoint x="233.14365832106037" y="86.69938461538462" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-58" parent="JBQeUsI5LZvYM7Zje36z-19" style="whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="66.9024" width="262.2857142857143" x="225.828" y="38.6976" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-57" parent="JBQeUsI5LZvYM7Zje36z-58" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="放入缓存&lt;div&gt;watch监听机制 被delete时自动删除缓存&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="230" x="17.125730612244897" y="14.252548800000001" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-61" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="JBQeUsI5LZvYM7Zje36z-53" style="endArrow=classic;html=1;rounded=0;exitX=0.341;exitY=0.951;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.014;entryY=0.367;entryDx=0;entryDy=0;entryPerimeter=0;" target="JBQeUsI5LZvYM7Zje36z-58" value="">
          <mxGeometry height="50" relative="1" width="50" as="geometry">
            <mxPoint x="116.5722297496318" y="96.29938461538462" as="sourcePoint" />
            <mxPoint x="165.14365832106037" y="48.299384615384625" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-69" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="JBQeUsI5LZvYM7Zje36z-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="bRpIeNP4qLkMaSWR5B6_-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-62" parent="JBQeUsI5LZvYM7Zje36z-19" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="优先从缓存中取" vertex="1">
          <mxGeometry height="30" width="110" x="106.8579440353461" y="48.299384615384625" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-71" edge="1" parent="JBQeUsI5LZvYM7Zje36z-19" source="bRpIeNP4qLkMaSWR5B6_-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.022;entryY=0.478;entryDx=0;entryDy=0;entryPerimeter=0;" target="oBcN0H2LNpYQoeTPZNVO-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-32" parent="oBcN0H2LNpYQoeTPZNVO-2" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="639.9999999999999" width="399.5876288659793" x="573.1436583210603" y="47.704923076923066" as="geometry" />
        </mxCell>
        <mxCell id="Rk-BxHf28-0AiVOfme5U-3" parent="JBQeUsI5LZvYM7Zje36z-32" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;" value="&lt;div&gt;1.SerialzerFactory拿到&lt;b&gt;&lt;font style=&quot;font-size: 14px; background-color: rgb(255, 157, 38);&quot;&gt;序列化器&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;2.rpc请求序列化一下&lt;/div&gt;3.发送http请求&lt;div&gt;4.拿到响应再反序列化&lt;/div&gt;" vertex="1">
          <mxGeometry height="231.11111111111106" width="187.89473684210523" x="94.39944343461741" y="332.30803418803407" as="geometry" />
        </mxCell>
        <mxCell id="Rk-BxHf28-0AiVOfme5U-2" parent="JBQeUsI5LZvYM7Zje36z-32" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;flipH=1;legacyAnchorPoints=0;" value="HttpClient.doRequest" vertex="1">
          <mxGeometry height="30" width="140" x="94.39731958762884" y="26.666666666666664" as="geometry" />
        </mxCell>
        <mxCell id="bRpIeNP4qLkMaSWR5B6_-40" parent="JBQeUsI5LZvYM7Zje36z-32" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" value="ServiceProxy继承InvocationHander&lt;div&gt;执行重写的.invoke方法&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="210" x="57.594584674632145" y="221.53619100706047" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-36" edge="1" parent="JBQeUsI5LZvYM7Zje36z-32" source="bRpIeNP4qLkMaSWR5B6_-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.377;entryY=0.007;entryDx=0;entryDy=0;entryPerimeter=0;" target="Rk-BxHf28-0AiVOfme5U-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-38" parent="JBQeUsI5LZvYM7Zje36z-32" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="ServiceProxyFactory&lt;div&gt;new 出一个ServiceProxy&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="160" x="83.8849342105264" y="135.3880341880342" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-39" edge="1" parent="JBQeUsI5LZvYM7Zje36z-32" source="Rk-BxHf28-0AiVOfme5U-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" target="JBQeUsI5LZvYM7Zje36z-38">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="178.5026842105264" y="99.66666666666664" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-41" edge="1" parent="JBQeUsI5LZvYM7Zje36z-32" source="JBQeUsI5LZvYM7Zje36z-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.486;entryY=0.041;entryDx=0;entryDy=0;entryPerimeter=0;" target="bRpIeNP4qLkMaSWR5B6_-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-33" edge="1" parent="oBcN0H2LNpYQoeTPZNVO-2" source="Rk-BxHf28-0AiVOfme5U-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" target="Rk-BxHf28-0AiVOfme5U-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-64" parent="1" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="170" width="550" x="-640" y="890" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-63" parent="JBQeUsI5LZvYM7Zje36z-64" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="&lt;span style=&quot;text-align: left; text-wrap-mode: nowrap;&quot;&gt;连接ETCD&amp;nbsp;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;text-align: left; text-wrap-mode: nowrap;&quot;&gt;启动heatbeat心跳任务&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;text-wrap-mode: nowrap;&quot;&gt;每10s 根据&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); text-align: center;&quot;&gt;localRegisterNodeKeySet&lt;/span&gt;&lt;span style=&quot;text-wrap-mode: nowrap; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;从etcd查询 过期跳过 未过期续约&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;text-wrap-mode: nowrap; background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));&quot;&gt;注册JVM钩子 退出时执行服务销毁 根据&lt;/span&gt;&lt;span style=&quot;background-color: transparent; color: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); text-align: center;&quot;&gt;localRegisterNodeKeySet删除ETCD的所有服务&lt;/span&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="70" width="490" x="13.352997194274609" y="21.248229166666764" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-65" parent="JBQeUsI5LZvYM7Zje36z-64" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="RPC.init" vertex="1">
          <mxGeometry height="30" width="70" x="224.27631975439937" y="-1.509903313490213e-14" as="geometry" />
        </mxCell>
        <mxCell id="JBQeUsI5LZvYM7Zje36z-70" edge="1" parent="1" source="JBQeUsI5LZvYM7Zje36z-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" target="JBQeUsI5LZvYM7Zje36z-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="jliZoF9p-Ik8w4fAEjBI-1" parent="1" style="rounded=0;whiteSpace=wrap;html=1;container=1;" value="" vertex="1">
          <mxGeometry height="380" width="770" x="40" y="1110" as="geometry" />
        </mxCell>
        <mxCell id="jliZoF9p-Ik8w4fAEjBI-2" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="Java SPI机制" vertex="1">
          <mxGeometry height="30" width="100" x="41.62162162162162" y="10" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-6" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="qRvuUBfZeLMsDmPgRdEg-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-1" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="SerilizerFatory.getInstance&lt;div&gt;&lt;br&gt;&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="170" x="52.02702702702703" y="90" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-10" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="qRvuUBfZeLMsDmPgRdEg-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-5" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="触发SpILoader.load(Serilier.class)" vertex="1">
          <mxGeometry height="30" width="200" x="36.41891891891892" y="170" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-11" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="qRvuUBfZeLMsDmPgRdEg-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-7" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="扫描META-rpc" vertex="1">
          <mxGeometry height="30" width="100" x="270.5405405405406" y="170" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-14" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" target="qRvuUBfZeLMsDmPgRdEg-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-8" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="放入临时keClassMap" vertex="1">
          <mxGeometry height="30" width="140" x="416.21621621621625" y="170" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-12" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="放入loaderMap&lt;div&gt;key:Serilzer&lt;/div&gt;&lt;div&gt;vlaue:jdk - JDKSerilzer&lt;/div&gt;" vertex="1">
          <mxGeometry height="60" width="140" x="593.1081081081081" y="155" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-19" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" target="qRvuUBfZeLMsDmPgRdEg-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-15" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="触发SpiLoader.getInstance" vertex="1">
          <mxGeometry height="30" width="170" x="62.432432432432435" y="240" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-17" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.447;entryY=0.009;entryDx=0;entryDy=0;entryPerimeter=0;" target="qRvuUBfZeLMsDmPgRdEg-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-18" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="从loadMap中去拿JsonSerlizer类信息" vertex="1">
          <mxGeometry height="30" width="220" x="280.94594594594594" y="240" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-21" parent="jliZoF9p-Ik8w4fAEjBI-1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;autosize=1;resizable=0;" value="根据信息去InstanceCache中查看是否有实例&amp;nbsp;&lt;div&gt;没有就新建放入InstanceCache&lt;/div&gt;" vertex="1">
          <mxGeometry height="40" width="260" x="270.54486486486485" y="320" as="geometry" />
        </mxCell>
        <mxCell id="qRvuUBfZeLMsDmPgRdEg-23" edge="1" parent="jliZoF9p-Ik8w4fAEjBI-1" source="qRvuUBfZeLMsDmPgRdEg-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.464;entryY=-0.02;entryDx=0;entryDy=0;entryPerimeter=0;" target="qRvuUBfZeLMsDmPgRdEg-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
